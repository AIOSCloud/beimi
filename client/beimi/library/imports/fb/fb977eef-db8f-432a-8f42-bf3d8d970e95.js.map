{"version":3,"sources":["assets\\script\\lib\\HTTP.js"],"names":["URL","cc","VERSION","HTTP","Class","extends","Component","properties","statics","baseURL","authorization","httpGet","url","callback","xhr","loader","getXMLHttpRequest","onreadystatechange","readyState","status","respone","responseText","open","setRequestHeader","sys","isNative","timeout","send","encodeFormData","data","pairs","regexp","name","value","toString","pair","encodeURIComponent","replace","push","join","httpPost","params","onLoad"],"mappings":"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","file":"unknown","sourcesContent":["var URL = \"http://127.0.0.1\";\r\ncc.VERSION = 2017061001;\r\nvar HTTP = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    statics: {\r\n        baseURL:URL,\r\n        authorization: null,\r\n        httpGet: function (url, callback) {\r\n            var xhr = cc.loader.getXMLHttpRequest();\r\n            \r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n                    var respone = xhr.responseText;\r\n                    if(callback){\r\n                        callback(respone);\r\n                    }\r\n                }\r\n            };\r\n            xhr.open(\"GET\", HTTP.baseURL+url, true);\r\n            if(HTTP.authorization != null){\r\n                xhr.setRequestHeader(\"authorization\", HTTP.authorization) ;\r\n            }\r\n            if (cc.sys.isNative) {\r\n                xhr.setRequestHeader(\"Accept-Encoding\", \"gzip,deflate\");\r\n            }\r\n    \r\n            // note: In Internet Explorer, the timeout property may be set only after calling the open()\r\n            // method and before calling the send() method.\r\n            xhr.timeout = 5000;// 5 seconds for timeout\r\n    \r\n            xhr.send();\r\n        },\r\n        encodeFormData : function(data)  \r\n        {  \r\n            var pairs = [];  \r\n            var regexp = /%20/g;  \r\n          \r\n            for (var name in data){  \r\n                var value = data[name].toString();  \r\n                var pair = encodeURIComponent(name).replace(regexp, \"+\") + \"=\" +  \r\n                    encodeURIComponent(value).replace(regexp, \"+\");  \r\n                pairs.push(pair);  \r\n            }  \r\n            return pairs.join(\"&\");  \r\n        },\r\n        httpPost: function (url, params, callback) {\r\n            var xhr = cc.loader.getXMLHttpRequest();\r\n            \r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n                    var respone = xhr.responseText;\r\n                    if(callback){\r\n                        callback(respone);\r\n                    }\r\n                }else{\r\n                    if(callback){\r\n                      callback(-1);\r\n                    }\r\n                }\r\n            };\r\n            xhr.open(\"POST\", HTTP.baseURL+url, true);\r\n            if(HTTP.authorization !== null){\r\n                xhr.setRequestHeader(\"authorization\", HTTP.authorization) ;\r\n            }\r\n            if (cc.sys.isNative) {\r\n                xhr.setRequestHeader(\"Accept-Encoding\", \"gzip,deflate\");\r\n            }\r\n            xhr.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded\");\r\n    \r\n            // note: In Internet Explorer, the timeout property may be set only after calling the open()\r\n            // method and before calling the send() method.\r\n            xhr.timeout = 5000;// 5 seconds for timeout\r\n            \r\n            xhr.send( HTTP.encodeFormData(params));\r\n        }\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n    },\r\n\r\n    \r\n});"]}