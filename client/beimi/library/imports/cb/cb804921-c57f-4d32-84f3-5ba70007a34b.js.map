{"version":3,"sources":["assets\\script\\components\\loading.js"],"names":["cc","Class","extends","Component","properties","_progress","_splash","_isLoading","onLoad","sys","isNative","isMobile","canvas","node","getComponent","Canvas","fitHeight","fitWidth","initMgr","find","active","tools","audio","playBGM","xhr","http","httpPost","username","password","ret","authorization","httpGet","io","start","self","SHOW_TIME","FADE_TIME","os","OS_IOS","require","Audio","init","window","SocketIO"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,mBAAU,GAXF;AAYRC,iBAAQ,IAZA;AAaRC,oBAAW;AAbH,KAHP;;AAmBL;AACAC,YAAQ,kBAAY;AAChB,YAAG,CAACR,GAAGS,GAAH,CAAOC,QAAR,IAAoBV,GAAGS,GAAH,CAAOE,QAA9B,EAAuC;AACnC,gBAAIC,SAAS,KAAKC,IAAL,CAAUC,YAAV,CAAuBd,GAAGe,MAA1B,CAAb;AACAH,mBAAOI,SAAP,GAAmB,IAAnB;AACAJ,mBAAOK,QAAP,GAAkB,IAAlB;AACH;AACD,aAAKC,OAAL;AACA,aAAKZ,OAAL,GAAeN,GAAGmB,IAAH,CAAQ,eAAR,CAAf;AACA,aAAKb,OAAL,CAAac,MAAb,GAAsB,IAAtB;;AAEApB,WAAGqB,KAAH,CAASC,KAAT,CAAeC,OAAf,CAAuB,YAAvB;AACA,YAAIC,MAAMxB,GAAGqB,KAAH,CAASI,IAAT,CAAcC,QAAd,CAAuB,SAAvB,EAAiC,EAACC,UAAS,OAAV,EAAkBC,UAAS,QAA3B,EAAjC,EAAsE,UAASC,GAAT,EAAa;AACzF7B,eAAGqB,KAAH,CAASI,IAAT,CAAcK,aAAd,GAA8BD,GAA9B;AACA7B,eAAGqB,KAAH,CAASI,IAAT,CAAcM,OAAd,CAAsB,SAAtB,EAAgC,UAASF,GAAT,EAAa;AACzC;AACH,aAFD;AAGH,SALS,CAAV;AAMAG,WAAG,4CAAH;AACH,KAtCI;AAuCLC,WAAM,iBAAU;AACZ,YAAIC,OAAO,IAAX;AACA,YAAIC,YAAY,IAAhB;AACA,YAAIC,YAAY,GAAhB;AACA,YAAGpC,GAAGS,GAAH,CAAO4B,EAAP,IAAarC,GAAGS,GAAH,CAAO6B,MAApB,IAA8B,CAACtC,GAAGS,GAAH,CAAOC,QAAzC,EAAkD;AAC9CwB,iBAAK5B,OAAL,CAAac,MAAb,GAAuB,IAAvB;AACH,SAFD,MAEK;AACDc,iBAAK5B,OAAL,CAAac,MAAb,GAAsB,KAAtB;AACH;AACJ,KAhDI;AAiDLF,aAAQ,mBAAU;AACdlB,WAAGqB,KAAH,GAAW,EAAX;AACArB,WAAGqB,KAAH,CAASI,IAAT,GAAgBc,QAAQ,MAAR,CAAhB;;AAEA,YAAIC,QAAQD,QAAQ,OAAR,CAAZ;AACAvC,WAAGqB,KAAH,CAASC,KAAT,GAAiB,IAAIkB,KAAJ,EAAjB;AACAxC,WAAGqB,KAAH,CAASC,KAAT,CAAemB,IAAf;;AAEA,YAAGzC,GAAGS,GAAH,CAAOC,QAAV,EAAmB;AACfgC,mBAAOV,EAAP,GAAYW,QAAZ;AACH,SAFD,MAEK;AACDD,mBAAOV,EAAP,GAAYO,QAAQ,WAAR,CAAZ;AACH;AACJ;;AA9DI,CAAT","file":"unknown","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        _progress:0.0,\r\n        _splash:null,\r\n        _isLoading:false\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(!cc.sys.isNative && cc.sys.isMobile){\r\n            var canvas = this.node.getComponent(cc.Canvas);\r\n            canvas.fitHeight = true;\r\n            canvas.fitWidth = true;\r\n        }\r\n        this.initMgr();\r\n        this._splash = cc.find(\"Canvas/splash\");\r\n        this._splash.active = true;\r\n        \r\n        cc.tools.audio.playBGM(\"bgMain.mp3\");\r\n        var xhr = cc.tools.http.httpPost(\"/tokens\",{username:'admin',password:'123456'},function(ret){\r\n            cc.tools.http.authorization = ret ;\r\n            cc.tools.http.httpGet(\"/tokens\",function(ret){\r\n                //console.log(ret);\r\n            });\r\n        });\r\n        io(\"http://127.0.0.1:9081/im/user?userid=admin\");\r\n    },\r\n    start:function(){        \r\n        var self = this;\r\n        var SHOW_TIME = 3000;\r\n        var FADE_TIME = 500;\r\n        if(cc.sys.os != cc.sys.OS_IOS || !cc.sys.isNative){\r\n            self._splash.active =  true;\r\n        }else{\r\n            self._splash.active = false;\r\n        }\r\n    },\r\n    initMgr:function(){\r\n        cc.tools = {};   \r\n        cc.tools.http = require(\"HTTP\");\r\n        \r\n        var Audio = require(\"Audio\");\r\n        cc.tools.audio = new Audio();\r\n        cc.tools.audio.init();\r\n        \r\n        if(cc.sys.isNative){\r\n            window.io = SocketIO;\r\n        }else{\r\n            window.io = require(\"socket.io\"); \r\n        }\r\n    }\r\n\r\n});\r\n"]}